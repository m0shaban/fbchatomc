"""
ูุญุงูุงุฉ ุงุณุชุฌุงุจุฉ API ุจุฏูู ุงูุงุชุตุงู ุจุงูุฎุฏูุฉ ุงูุฎุงุฑุฌูุฉ
ูุณุชุฎุฏู ูุชูููุฏ ุฑุฏูุฏ ูุญููุฉ ุนูุฏูุง ูููู ุงูุงุชุตุงู ุจุงูุฎุฏูุฉ ุงูุฎุงุฑุฌูุฉ ุบูุฑ ูุชุงุญ
"""

import random
import json
import logging
from typing import Dict, Any, List

# ุฅุนุฏุงุฏ ุงูุชุณุฌูู
logger = logging.getLogger(__name__)

class LocalResponseGenerator:
    """
    ูููุฏ ุงุณุชุฌุงุจุงุช ูุญูู ูุณุชุฎุฏู ุนูุฏูุง ููุดู ุงูุงุชุตุงู ุจู API
    """
    
    def __init__(self, data_file: str = "data.json"):
        """
        ุชููุฆุฉ ูููุฏ ุงูุงุณุชุฌุงุจุงุช ุงููุญูู
        
        :param data_file: ููู ุงูุจูุงูุงุช ุงููุญูู
        """
        self.data_file = data_file
        self.knowledge_base = []
        self.greetings = []
        self.job_responses = []
        self.investor_responses = []
        self.general_responses = []
        self.contact_info = {}
        
        # ุชุญููู ุงูุจูุงูุงุช
        self._load_data()
        
        logger.info("ุชู ุชููุฆุฉ ูููุฏ ุงูุงุณุชุฌุงุจุงุช ุงููุญูู ุจูุฌุงุญ")
    
    def _load_data(self):
        """ุชุญููู ุงูุจูุงูุงุช ูู ููู JSON"""
        try:
            with open(self.data_file, 'r', encoding='utf-8') as f:
                data = json.load(f)
                
                # ุชุญููู ูุงุนุฏุฉ ุงููุนุฑูุฉ
                self.knowledge_base = data.get("prompts", [])
                
                # ุชุญููู ุงูุชุนุจูุฑุงุช ุงูุจุดุฑูุฉ
                expressions = data.get("human_expressions", {})
                self.greetings = expressions.get("greetings", [])
                self.job_responses = expressions.get("job_seekers_response", [])
                self.investor_responses = expressions.get("investors_response", [])
                
                # ุชุญููู ูุนูููุงุช ุงูุงุชุตุงู
                self.contact_info = data.get("contact_info", {})
                
                # ุฅูุดุงุก ุฑุฏูุฏ ุนุงูุฉ ุงูุชุฑุงุถูุฉ ุฅุฐุง ูู ุชูู ููุฌูุฏุฉ
                self._create_default_responses()
                
            logger.info(f"ุชู ุชุญููู {len(self.knowledge_base)} ุนูุตุฑ ูู ูุงุนุฏุฉ ุงููุนุฑูุฉ ุจูุฌุงุญ")
        except Exception as e:
            logger.error(f"ุฎุทุฃ ูู ุชุญููู ููู ุงูุจูุงูุงุช: {e}")
            # ุฅูุดุงุก ุฑุฏูุฏ ุงูุชุฑุงุถูุฉ ูู ุญุงูุฉ ุงููุดู
            self._create_default_responses()
    
    def _create_default_responses(self):
        """ุฅูุดุงุก ุฑุฏูุฏ ุงูุชุฑุงุถูุฉ ููุงุณุชุฎุฏุงู ุนูุฏ ุงูุญุงุฌุฉ"""
        # ุงูุชุฑุญูุจุงุช ุงูุงูุชุฑุงุถูุฉ
        if not self.greetings:
            self.greetings = [
                "ุฃููุงู ูุณููุงู!",
                "ูุฑุญุจุงู ุจู!",
                "ูุณุนุฏูุง ุชูุงุตูู ูุนูุง!",
                "ุดูุฑุงู ูุชูุงุตูู ูุน ูุฌูุน ุนูุงู ูุตุฑ!",
                "ุฃููุงู ุจู ูู ุฎุฏูุฉ ุนููุงุก ูุฌูุน ุนูุงู ูุตุฑ!"
            ]
        
        # ุฑุฏูุฏ ุงูุจุงุญุซูู ุนู ุนูู
        if not self.job_responses:
            self.job_responses = [
                "ูุณุนุฏูุง ุงูุชูุงูู ุจุงูุงูุชุญุงู ุจูุฑุต ุงูุนูู ูุฏููุง!",
                "ูุฑุญุจ ุจู ููุงูุถูุงู ููุฑูู ุงูุนูู ูู ูุฌูุน ุนูุงู ูุตุฑ!",
                "ูุญู ุฏุงุฆูุงู ูุจุญุซ ุนู ุงูููุงุกุงุช ุงููุชููุฒุฉ ููุนูู ูุนูุง!",
                "ูุฑุต ุงูุนูู ูุชููุนุฉ ูู ูุฌูุน ุนูุงู ูุตุฑ ููุฎุชูู ุงูุชุฎุตุตุงุช!"
            ]
        
        # ุฑุฏูุฏ ุงููุณุชุซูุฑูู
        if not self.investor_responses:
            self.investor_responses = [
                "ููุฏู ูููุณุชุซูุฑูู ูู ุณุจู ุงูุฏุนู ูุฅูุฌุงุญ ูุดุฑูุนุงุชูู!",
                "ูุฌูุน ุนูุงู ูุตุฑ ูุฑุญุจ ุจุงููุณุชุซูุฑูู ุงูุฑุงุบุจูู ูู ุชุทููุฑ ุฃุนูุงููู!",
                "ูุณุนู ุฏุงุฆูุงู ูุชูููุฑ ุจูุฆุฉ ุงุณุชุซูุงุฑูุฉ ููุงุณุจุฉ ูุดุฑูุงุฆูุง!",
                "ุงูุงุณุชุซูุงุฑ ูู ูุฌูุน ุนูุงู ูุตุฑ ูุฑุตุฉ ููููู ูุงูุชูุณุน!"
            ]
        
        # ุฑุฏูุฏ ุนุงูุฉ
        self.general_responses = [
            "ูุฌูุน ุนูุงู ูุตุฑ ูู ููุธููุฉ ุตูุงุนูุฉ ูุงูุชุตุงุฏูุฉ ุจุฏุฃุช ุนุงู 2010 ุจุฑุคูุฉ ูุทููุฉุ ูุชุทูุฑุช ูุชุตุจุญ ุดุฑูุฉ ูุณุงููุฉ ูุตุฑูุฉ ุจูููุฉ ุณูููุฉ ุชุชุฌุงูุฒ 1.5 ูููุงุฑ ุฌููู ูุตุฑู.",
            "ูููู ุงููุฌูุน ุจุฅุฏุงุฑุฉ ูุชุดุบูู ุงูููุดุขุช ุงูุตูุงุนูุฉ ูู ุฎูุงู ุชูููุฑ ูุชุฏุฑูุจ ุงูููุงุฏุฑ ุงูุจุดุฑูุฉุ ูุชูุฏูู ุฎุฏูุงุช ูููุณุชุซูุฑููุ ูุชูููุฐ ูุดุฑูุนุงุช ุตูุงุนูุฉ ูุชููุนุฉ.",
            "ูุฑุฃุณ ูุฌูุน ุนูุงู ูุตุฑ ุงููููุฏุณ ููุซู ุญุณูู ุญููุ ุงููุคุณุณ ูุงูุฑุฆูุณ ุงูุชูููุฐู ูููุฌูุน.",
            "ููุชู ูู ูุฌูุน ุนูุงู ูุตุฑ ุจุชุญููู ุงูุชูููุฉ ุงููุณุชุฏุงูุฉ ูู ุฎูุงู ุชูููุฑ ูุฑุต ุนูู ูุชุฏุฑูุจ ููุดุจุงุจุ ูุฏุนู ุงููุณุชุซูุฑูู ูุงูุดุฑูุงุช."
        ]
        
        # ูุนูููุงุช ุงูุงุชุตุงู ุงูุงูุชุฑุงุถูุฉ
        if not self.contact_info:
            self.contact_info = {
                "phone": "01100901200",
                "email": "info@omalmisr.com",
                "website": "www.omalmisr.com"
            }

    def generate_response(self, user_message: str, user_category: str = "", user_name: str = "") -> str:
        """
        ุชูููุฏ ุฑุฏ ูุญูู ุจูุงุกู ุนูู ุฑุณุงูุฉ ุงููุณุชุฎุฏู ููุฆุชู
        
        :param user_message: ุฑุณุงูุฉ ุงููุณุชุฎุฏู
        :param user_category: ูุฆุฉ ุงููุณุชุฎุฏู (ุจุงุญุซ ุนู ุนููุ ูุณุชุซูุฑุ ุฅูุฎ)
        :param user_name: ุงุณู ุงููุณุชุฎุฏู (ุงุฎุชูุงุฑู)
        :return: ุงูุฑุฏ ุงููููุฏ
        """
        # ุงูุจุญุซ ุนู ูููุงุช ููุชุงุญูุฉ ูู ุฑุณุงูุฉ ุงููุณุชุฎุฏู
        message_lower = user_message.lower()
        
        # ุชุญุฏูุฏ ููุน ุงูุฑุฏ ุงูููุงุณุจ
        if any(keyword in message_lower for keyword in ["ูุธููุฉ", "ุนูู", "ุชูุธูู", "ุดุบู"]):
            return self._generate_job_response(user_name)
        
        elif any(keyword in message_lower for keyword in ["ุงุณุชุซูุงุฑ", "ูุดุฑูุน", "ุดุฑุงูุฉ", "ูุฑุตุฉ"]):
            return self._generate_investor_response(user_name)
        
        elif any(keyword in message_lower for keyword in ["ูู ูู", "ููู", "ุงููุคุณุณ", "ููุซู", "ุงููุฏูุฑ"]):
            return self._generate_about_founder_response(user_name)
        
        elif any(keyword in message_lower for keyword in ["ูู ุงูุชู", "ุงูู", "ูุฌูุน", "ุดุฑูุฉ", "ููุธูุฉ"]):
            return self._generate_about_company_response(user_name)
        
        # ูู ุญุงู ุนุฏู ุชุทุงุจู ุงููููุงุช ุงูููุชุงุญูุฉุ ุนุฏ ุฑุฏ ุนุงู
        return self._generate_general_response(user_name)
    
    def _generate_job_response(self, user_name: str = "") -> str:
        """ุชูููุฏ ุฑุฏ ููุจุงุญุซูู ุนู ุนูู"""
        greeting = f"{random.choice(self.job_responses)}\n\n"
        
        name_greeting = f"ุฃููุงู ุจู{' ูุง ' + user_name if user_name else ''}! "
        
        content = """
ูุญู ูู *ูุฌูุน ุนูุงู ูุตุฑ* ูููุฑ ูุฑุต ุนูู ูุชููุนุฉ ูู ุนุฏุฉ ูุทุงุนุงุชุ ูููุง:

1๏ธโฃ ูุทุงุน *ุงูุตูุงุนุงุช ุงูุบุฐุงุฆูุฉ*
2๏ธโฃ ูุทุงุน *ุงูููุงุจุณ ูุงููุณูุฌ*
3๏ธโฃ ูุทุงุน *ุฎุฏูุงุช ุงูุจุชุฑูู*
4๏ธโฃ ูุทุงุน *ุงูุซุฑูุฉ ุงูุฏุงุฌูุฉ* (ูุดุฑูุน ุฏูุงุฌู ูุตุฑ)
5๏ธโฃ ูุทุงุน *ุงูุฎุฏูุงุช ุงูุฅุฏุงุฑูุฉ ูุงูุฏุนู ุงูููู*

ููููู ุงูุชูุฏูู ูููุธุงุฆู ูู ุฎูุงู:
โ ุฅุฑุณุงู ุณูุฑุชู ุงูุฐุงุชูุฉ ุนูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู: jobs@omalmisr.com
โ ุฒูุงุฑุฉ ููุฑ ุงููุฌูุน ูููุก ุงุณุชูุงุฑุฉ ุงูุชูุฏูู
โ ุงูุชุณุฌูู ุนุจุฑ ูููุนูุง ุงูุฅููุชุฑููู: www.omalmisr.com/jobs

ุชุตู ุงููุฑุชุจุงุช ูู ุจุนุถ ุงููุทุงุนุงุช ุฅูู 7000 ุฌููู ุดูุฑูุงูุ ูุน ุชูููุฑ ูุฒุงูุง ุฃุฎุฑู ูุซู ุงูุชุฃููู ุงูุตุญู ูุงูุงุฌุชูุงุนู.
"""
        
        contact = f"""
โข *ููุชูุงุตู ุงููุจุงุดุฑ*:
๐ ุชููููู/ูุงุชุณุงุจ: {self.contact_info.get('phone', '01100901200')}
โ๏ธ ุจุฑูุฏ ุฅููุชุฑููู: {self.contact_info.get('email', 'info@omalmisr.com')}
๐ ุงููููุน ุงูุฑุณูู: [www.omalmisr.com](https://{self.contact_info.get('website', 'www.omalmisr.com')})
"""

        # ุฑูุงุจุท ุณุฑูุนุฉ
        quick_links = """
โข *ุฑูุงุจุท ุณุฑูุนุฉ ูุฏ ุชููู*:
๐ [ุฑุงุจุท ุงูุชุณุฌูู ูููุธุงุฆู](https://omalmisrservices.com/en/jobs) - ุณุฌู ุงูุขู ูุจุงุดุฑุฉ ููุชูุฏู ูููุธุงุฆู ุงููุชุงุญุฉ
"""
        
        # ุณุคุงู ูููุชุงุจุนุฉ
        follow_up = random.choice([
            "ูู ูููููู ูุณุงุนุฏุชู ุจูุนูููุงุช ุฅุถุงููุฉ ุนู ุงููุธุงุฆู ุงููุชุงุญุฉุ",
            "ูู ูุฏูู ุฎุจุฑุฉ ุณุงุจูุฉ ูู ุฃู ูู ูุฌุงูุงุช ุนูููุงุ",
            "ูู ุชุจุญุซ ุนู ูุธููุฉ ูู ุชุฎุตุต ูุนููุ ุฃุณุชุทูุน ูุณุงุนุฏุชู."
        ])
        
        return greeting + name_greeting + content + contact + quick_links + "\n\n" + follow_up
    
    def _generate_investor_response(self, user_name: str = "") -> str:
        """ุชูููุฏ ุฑุฏ ูููุณุชุซูุฑูู"""
        greeting = f"{random.choice(self.investor_responses)}\n\n"
        
        name_greeting = f"ุฃููุงู ูุณููุงู ุจู{' ูุง ' + user_name if user_name else ''}! "
        
        content = """
ูุญู ูู *ูุฌูุน ุนูุงู ูุตุฑ* ุจููุฏู ุฏุนู ูุงูู ูููุณุชุซูุฑูู ูุฑุฌุงู ุงูุฃุนูุงูุ ุนูุดุงู ูุณูู ุนููู ุชูููุฐ ูุดุฑูุนุงุชู ุงูุตูุงุนูุฉ ูุงูุงุณุชุซูุงุฑูุฉ ุจูุฌุงุญ.

โข *ุฎุฏูุงุช ูุชูุงููุฉ ูููุณุชุซูุฑูู*:
โ *ุชุฃุณูุณ ูุฅุฏุงุฑุฉ ุงููุดุฑูุนุงุช*: ูู ุงูุชุฎุทูุท ุญุชู ุงูุชุดุบูู.
โ *ุชูููุฑ ุงูููุงุฏุฑ ุงููุฏุฑุจุฉ*: ุนูุงูุฉ ูุคููุฉ ุจูุนุงููุฑ ุนุงูููุฉ.
โ *ุดุฑุงูุงุช ุงุณุชุฑุงุชูุฌูุฉ*: ูุน ุฌูุงุช ูุญููุฉ ูุฏูููุฉ ูุถูุงู ูุฌุงุญ ุงููุดุฑูุน.
โ *ูุดุฑูุนุงุช ูุฑุจุญุฉ*: ุฒู *ูุดุฑูุน ุฏูุงุฌู ูุตุฑ* (ูุฏููุฉ ุงูุซุฑูุฉ ุงูุฏุงุฌูุฉ) ุงููู ุจูุญูู ุนุงุฆุฏ ุงุณุชุซูุงุฑ ูุตู ูู *39% ุณูููุงู*!

ูููููุง ุชุฑุชูุจ ููุงุก ูุนู ูููุงูุดุฉ ุงููุฑุต ุงูุงุณุชุซูุงุฑูุฉ ุงููุชุงุญุฉ ูุชูุฏูู ุฏุฑุงุณุฉ ุฌุฏูู ูุงุถุญุฉ ูุฃู ูุดุฑูุน.
"""
        
        contact = f"""
โข *ููุชูุงุตู ุงููุจุงุดุฑ*:
๐ ุชููููู/ูุงุชุณุงุจ: {self.contact_info.get('phone', '01100901200')}
โ๏ธ ุจุฑูุฏ ุฅููุชุฑููู: {self.contact_info.get('email', 'info@omalmisr.com')}
๐ ุงููููุน ุงูุฑุณูู: [www.omalmisr.com](https://{self.contact_info.get('website', 'www.omalmisr.com')})
"""

        # ุฑูุงุจุท ุณุฑูุนุฉ
        quick_links = """
โข *ุฑูุงุจุท ุณุฑูุนุฉ ูุฏ ุชููู*:
๐ [ุฎุฏูุงุช ุงููุณุชุซูุฑูู](https://omalmisrservices.com/en/companies) - ุชุนุฑู ุนูู ุงููุฑุต ุงูุงุณุชุซูุงุฑูุฉ ูุฎุฏูุงุช ุงูุดุฑูุงุช
"""
        
        # ุณุคุงู ูููุชุงุจุนุฉ
        follow_up = random.choice([
            "ูู ุชูุชู ุจูุทุงุน ุตูุงุนู ูุญุฏุฏุ",
            "ูู ูุฏูู ุงุณุชูุณุงุฑ ุนู ุฃู ูู ุงููุฑุต ุงูุงุณุชุซูุงุฑูุฉ ูุฏููุงุ",
            "ูู ุชุฑุบุจ ูู ูุนุฑูุฉ ุงููุฒูุฏ ุนู ุนุงุฆุฏ ุงูุงุณุชุซูุงุฑ ูู ูุดุงุฑูุนูุงุ"
        ])
        
        return greeting + name_greeting + content + contact + quick_links + "\n\n" + follow_up
    
    def _generate_about_founder_response(self, user_name: str = "") -> str:
        """ุชูููุฏ ุฑุฏ ุนู ูุคุณุณ ุงููุฌูุน"""
        greeting = f"{random.choice(self.greetings)}\n\n"
        
        name_greeting = f"ุฃููุงู {user_name if user_name else ''}! "
        
        content = """
ุงููููุฏุณ ููุซู ุญุณูู ูู ุงููุคุณุณ ูุงูุฑุฆูุณ ุงูุชูููุฐู ู*ูุฌูุน ุนูุงู ูุตุฑ*ุ ููู ูุงุฆุฏ ุตูุงุนู ูุฑุฌู ุฃุนูุงู ูุชููุฒ ูุงุฏ ุงูููุธููุฉ ููุฐ ุชุฃุณูุณูุง ุนุงู 2010 ูุญุชู ุฃุตุจุญุช ุดุฑูุฉ ูุณุงููุฉ ูุตุฑูุฉ ูุจุฑู ุจูููุฉ ุณูููุฉ ุชุชุฌุงูุฒ 1.5 ูููุงุฑ ุฌููู ูุตุฑู.

โข *ุฃุจุฑุฒ ุฃุฏูุงุฑู ูุฅูุฌุงุฒุงุชู*:
โ ููุงุฏุฉ ุชุทููุฑ ูุฌูุน ุนูุงู ูุตุฑ ููุดูู ูุดุฑูุนุงุช ุตูุงุนูุฉ ูุชููุนุฉ ูุซู *ุฏูุงุฌู ูุตุฑุ ูุตุงูุน ุงูููุงุจุณุ ูุงูุตูุงุนุงุช ุงูุบุฐุงุฆูุฉ*.
โ ุจูุงุก ุดุฑุงูุงุช ูุญููุฉ ูุฏูููุฉ ูุชุนุฒูุฒ ุงูุงูุชุตุงุฏ ุงููุตุฑู ูุชูููุฑ ูุฑุต ุนูู.
โ ุงูุงูุชูุงู ุจุชุฏุฑูุจ ูุชุฃููู ุงูููุงุฏุฑ ุงูุจุดุฑูุฉ ูุฑูุน ููุงุกุฉ ุงููุทุงุน ุงูุตูุงุนู.

ูุญูู ุฑุคูุฉ ูุทููุฉ ูุงุถุญุฉ ูุชุทููุฑ ุงูุตูุงุนุฉ ุงููุตุฑูุฉ ูุฏุนู ุงููุณุชุซูุฑูู ูุงูุนูุงู ุนูู ุญุฏ ุณูุงุก.
"""
        
        contact = f"""
โข *ููุชูุงุตู ูุน ูุฌูุน ุนูุงู ูุตุฑ*:
๐ ุชููููู/ูุงุชุณุงุจ: {self.contact_info.get('phone', '01100901200')}
โ๏ธ ุจุฑูุฏ ุฅููุชุฑููู: {self.contact_info.get('email', 'info@omalmisr.com')}
๐ ุงููููุน ุงูุฑุณูู: [www.omalmisr.com](https://{self.contact_info.get('website', 'www.omalmisr.com')})
"""
        
        # ุณุคุงู ูููุชุงุจุนุฉ
        follow_up = random.choice([
            "ูู ุชุญุชุงุฌ ููุนูููุงุช ุฅุถุงููุฉ ุนู ุงููููุฏุณ ููุซู ุฃู ูุฌูุน ุนูุงู ูุตุฑุ",
            "ูู ุชุฑุบุจ ูู ูุนุฑูุฉ ุงููุฒูุฏ ุนู ุฃูุดุทุฉ ุงููุฌูุน ูุฅูุฌุงุฒุงุชูุ",
            "ูู ูููููู ูุณุงุนุฏุชู ุจุฃู ูุนูููุงุช ุฃุฎุฑูุ"
        ])
        
        return greeting + name_greeting + content + contact + "\n\n" + follow_up
    
    def _generate_about_company_response(self, user_name: str = "") -> str:
        """ุชูููุฏ ุฑุฏ ุนู ุงูุดุฑูุฉ"""
        greeting = f"{random.choice(self.greetings)}\n\n"
        
        name_greeting = f"ูุฑุญุจุงู{' ' + user_name if user_name else ''}! "
        
        content = """
*ูุฌูุน ุนูุงู ูุตุฑ* ูู ููุธููุฉ ุตูุงุนูุฉ ูุงูุชุตุงุฏูุฉ ุจุฏุฃุช ุนุงู 2010 ุจุฑุคูุฉ ูุทููุฉุ ุชุทููุฑุช ูุชุตุจุญ ุดุฑูุฉ ูุณุงููุฉ ูุตุฑูุฉ ุจูููุฉ ุณูููุฉ ุชุชุฌุงูุฒ 1.5 ูููุงุฑ ุฌููู ูุตุฑู.

โข *ุชููู ุงูููุธููุฉ ุจุฅุฏุงุฑุฉ ูุชุดุบูู ุงูููุดุขุช ุงูุตูุงุนูุฉ ูู ุฎูุงู*:
1๏ธโฃ ุชูููุฑ ูุชุฏุฑูุจ ูุชุฃููู ุงูููุงุฏุฑ ุงูุจุดุฑูุฉ ููุนูู ุจุงูุฃูุดุทุฉ ุงููุฎุชููุฉ.
2๏ธโฃ ุฎุฏูุงุช ูููุณุชุซูุฑูู ูุฃุตุญุงุจ ุงููุตุงูุน ููุณุงุนุฏุชูู ุนูู ุชูููุฐ ูุดุงุฑูุนูู.
3๏ธโฃ ุชูููุฐ ูุดุฑูุนุงุช ุตูุงุนูุฉ ูุชููุนุฉ ูุซู ูุดุฑูุน ุฏูุงุฌู ูุตุฑุ ููุตุงูุน ุงูููุงุจุณุ ูุงูุตูุงุนุงุช ุงูุบุฐุงุฆูุฉ.
4๏ธโฃ ุนูุฏ ุดุฑุงูุงุช ูุญููุฉ ูุฏูููุฉ ูุชุนุฒูุฒ ุงูุงูุชุตุงุฏ ุงููุตุฑู.

ูุฑุฃุณ ุงููุฌูุน ุงููููุฏุณ ููุซู ุญุณูู ุญูู (ุงููุคุณุณ ูุงูุฑุฆูุณ ุงูุชูููุฐู).
"""
        
        contact = f"""
โข *ููุชูุงุตู ูุนูุง*:
๐ ุชููููู/ูุงุชุณุงุจ: {self.contact_info.get('phone', '01100901200')}
โ๏ธ ุจุฑูุฏ ุฅููุชุฑููู: {self.contact_info.get('email', 'info@omalmisr.com')}
๐ ุงููููุน ุงูุฑุณูู: [www.omalmisr.com](https://{self.contact_info.get('website', 'www.omalmisr.com')})
"""
        
        # ุณุคุงู ูููุชุงุจุนุฉ
        follow_up = random.choice([
            "ููู ูููููู ูุณุงุนุฏุชู ุงููููุ",
            "ูู ูุฏูู ุงุณุชูุณุงุฑ ูุญุฏุฏ ุนู ุฃูุดุทุฉ ุงููุฌูุนุ",
            "ูู ุชุฑุบุจ ูู ูุนุฑูุฉ ุงููุฒูุฏ ุนู ุฎุฏูุงุชูุงุ"
        ])
        
        return greeting + name_greeting + content + contact + "\n\n" + follow_up
    
    def _generate_general_response(self, user_name: str = "") -> str:
        """ุชูููุฏ ุฑุฏ ุนุงู"""
        greeting = f"{random.choice(self.greetings)}\n\n"
        
        name_greeting = f"ุฃููุงู{' ' + user_name if user_name else ''}! "
        
        content = random.choice(self.general_responses) + "\n\n"
        content += """
โข *ุฎุฏูุงุชูุง ุงูุฑุฆูุณูุฉ*:
โ ุชูููุฑ ูุฑุต ุนูู ููุจุงุญุซูู ุนู ุนูู ูู ูุทุงุนุงุช ูุฎุชููุฉ.
โ ุชูุฏูู ุฎุฏูุงุช ุงุณุชุซูุงุฑูุฉ ูููุณุชุซูุฑูู ูุฃุตุญุงุจ ุงููุดุงุฑูุน.
โ ุชูููุฑ ุนูุงูุฉ ูุฏุฑุจุฉ ููุดุฑูุงุช ูุงููุตุงูุน.
โ ุชูููุฐ ูุดุฑูุนุงุช ุตูุงุนูุฉ ูุชููุนุฉ.
โ ุงูุชุฏุฑูุจ ุงููููู ูุชุฃููู ุงูููุงุฏุฑ ุงูุจุดุฑูุฉ.

ููููู ุฒูุงุฑุฉ ูููุนูุง ุงูุฅููุชุฑููู ููุงุทูุงุน ุนูู ูุงูุฉ ุงูุฎุฏูุงุช ูุงููุดุฑูุนุงุช.
"""
        
        contact = f"""
โข *ููุชูุงุตู ุงููุจุงุดุฑ*:
๐ ุชููููู/ูุงุชุณุงุจ: {self.contact_info.get('phone', '01100901200')}
โ๏ธ ุจุฑูุฏ ุฅููุชุฑููู: {self.contact_info.get('email', 'info@omalmisr.com')}
๐ ุงููููุน ุงูุฑุณูู: [www.omalmisr.com](https://{self.contact_info.get('website', 'www.omalmisr.com')})
"""
        
        # ุฑูุงุจุท ุณุฑูุนุฉ
        quick_links = """
โข *ุฑูุงุจุท ุณุฑูุนุฉ ูุฏ ุชููู*:
๐ [ุฑุงุจุท ุงูุชุณุฌูู ูููุธุงุฆู](https://omalmisrservices.com/en/jobs) - ุณุฌู ุงูุขู ููุชูุฏู ูููุธุงุฆู ุงููุชุงุญุฉ
๐ [ุฎุฏูุงุช ุงููุณุชุซูุฑูู](https://omalmisrservices.com/en/companies) - ุงููุฑุต ุงูุงุณุชุซูุงุฑูุฉ ูุฎุฏูุงุช ุงูุดุฑูุงุช
๐ [ุชูููุฑ ุงูุนูุงูุฉ](https://omalmisrservices.com/en/workers) - ููุดุฑูุงุช ุงูุจุงุญุซุฉ ุนู ุนูุงูุฉ ูุฏุฑุจุฉ
"""
        
        # ุณุคุงู ูููุชุงุจุนุฉ
        follow_up = random.choice([
            "ููู ูููููุง ูุณุงุนุฏุชู ุงููููุ",
            "ูู ููุงู ุฎุฏูุฉ ูุญุฏุฏุฉ ุชุจุญุซ ุนููุงุ",
            "ูู ุชูุฏ ูุนุฑูุฉ ุงููุฒูุฏ ุนู ุฃู ูู ุฎุฏูุงุชูุงุ"
        ])
        
        return greeting + name_greeting + content + contact + quick_links + "\n\n" + follow_up